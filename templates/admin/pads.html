<!DOCTYPE html>
<html>
  <head>
    <title data-l10n-id="ep_adminpads2_title">Pad administration</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="../static/css/admin.css">
    <style type="text/css">
      #results-table .padname {text-align: left;}
      #results-table .last-edited {text-align: center; width: 1%; white-space: nowrap;}
      #results-table .user-count {text-align: right; width: 1%; white-space: nowrap;}
      #results-table .actions {text-align: center; width: 1%; white-space: nowrap;}
      #results-table .no-results {font-style: italic;}
    </style>

    <% e.begin_block("scripts"); %>
    <script src="../static/js/jquery.js"></script>
    <script src="../socket.io/socket.io.js"></script>
    <script type="text/javascript" src="../static/js/require-kernel.js"></script>
    <link rel="localizations" type="application/l10n+json" href="../locales.json" />
    <script src="../static/js/html10n.js"></script>
    <script src="../static/js/l10n.js"></script>

    <!-- Include base packages manually (this help with debugging) -->
    <script type="text/javascript" src="../javascripts/lib/ep_etherpad-lite/static/js/ace2_common.js?callback=require.define"></script>

    <!-- Bootstrap page -->
    <script type="text/javascript">
      let clientVars = {};
      (function () {
        let pathComponents = location.pathname.split('/');

        // Strip 'p' and the padname from the pathname and set as baseURL
        let baseURL = pathComponents.slice(0, pathComponents.length - 2).join('/') + '/';

        require.setRootURI(baseURL + 'javascripts/src');
        require.setLibraryURI(baseURL + 'javascripts/lib');
        require.setGlobalKeyPath('require');

        $ = jQuery = require('ep_etherpad-lite/static/js/rjquery').jQuery; // Expose jQuery #HACK

        let plugins = require('ep_etherpad-lite/static/js/pluginfw/client_plugins');
        let hooks = require('ep_etherpad-lite/static/js/pluginfw/hooks');

        plugins.baseURL = baseURL;
        plugins.update(function () {
          hooks.plugins = plugins;

          // Call documentReady hook
          $(function() {
            hooks.aCallAll('documentReady','admin/pads');
          });
        });
      }());
    </script>
    <% e.end_block(); %>
  </head>
  <body>
    <div id="wrapper">
      <% if (errors.length) { %>
      <div class="errors">
        <% errors.forEach(function (item) { %>
        <div class="error"><%= item.toString() %></div>
        <% }) %>
      </div>
      <% } %>

      <div class="menu">
        <h1><a href="../../">Etherpad</a></h1>
        <ul>
          <% e.begin_block("adminMenu"); %>
          <li><a href="plugins">Plugin manager</a></li>
          <li><a href="settings">Settings</a></li>
          <li><a href="plugins/info">Troubleshooting information</a></li>
          <% e.end_block(); %>
        </ul>
      </div>

      <div class="innerwrapper">
        <div class="paged listing" id="search-results">
          <h2 data-l10n-id="ep_adminpads2_search-heading">Search for pads</h2>
          <form name="search-form" id="search-form">
            <input type="text" name="search" placeholder="Search term" id="search-query" data-l10n-id="ep_adminpads2_search-box.placeholder">
            <input type="button" value="Search" id="do-search" data-l10n-id="ep_adminpads2_search-button.value">
          </form>
          <input type="checkbox" name="autoupdate" id="results-autoupdate" title="Enables or disables automatic updates for the current query." data-l10n-id="ep_adminpads2_autoupdate.title">
          <label for="results-autoupdate" data-l10n-id="ep_adminpads2_autoupdate-label">Auto-update on pad changes</label>
          <table id="results-table">
            <thead>
              <tr>
                <th class="padname" data-l10n-id="ep_adminpads2_padname">Padname</th>
                <th class="last-edited" data-l10n-id="ep_adminpads2_last-edited">Last edited</th>
                <th class="user-count" data-l10n-id="ep_adminpads2_pad-user-count">Pad user count</th>
                <th class="actions" data-l10n-id="ep_adminpads2_action">Action</th>
              </tr>
            </thead>
            <tbody class="template">
              <tr id="template">
                <td class="padname"></td>
                <td class="last-edited"></td>
                <td class="user-count"></td>
                <td class="actions">
                  <input type="button" value="Delete" class="do-delete" data-l10n-id="ep_adminpads2_delete.value">
                </td>
              </tr>
            </tbody>
            <tbody id="results">
            </tbody>
          </table>
          <input type="button" value="&lt;&lt;" id="do-prev-page">
          <span class="offset"></span>..<span class="limit"></span> <span data-l10n-id="ep_adminpads2_of">of</span> <span class="total"></span>
          <input type="button" value="&gt;&gt;" id="do-next-page">
        </div>
      </div>
    </div>
  </body>
</html>
